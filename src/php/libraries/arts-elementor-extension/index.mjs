/*!
 * Arts Elementor Extension v1.0.0
 * https://artemsemkin.com
 * https://github.com/artkrsk/arts-elementor-extension
 * Â© 2025 Artem Semkin
 * License: MIT
 */
var r=null,d=null,g=()=>{d=r.$preview.get(0).contentWindow},C=()=>{let{addChangeCallback:n}=r.settings.page;(window.artsElementorExtensionEditorLiveSettings||[]).forEach(e=>n(e,i=>b(e,i)))},b=(n,t)=>{let e=r.settings.page.model.attributes;w("arts/elementor_extension/editor/setting_changed",{settings:e,setting:n,value:t})},x=()=>{d&&(d.removeEventListener("arts/elementor_extension/editor/reload_preview",c),d.addEventListener("arts/elementor_extension/editor/reload_preview",c))},c=n=>{let t=n.detail||{},{route:e,section:i}=t;u(e,i)},f=(n,t)=>{r.once("preview:loaded",()=>{window.$e.data.get("globals/index").then(()=>{setTimeout(()=>{window.$e.routes.current.panel.search("panel/global")>=0?window.$e.run("panel/global/open").then(()=>{n&&window.$e.route(n),window.elementorCommon.elements.$body.removeClass("elementor-panel-loading")}):(n&&window.$e.route(n),t&&(r.getPanelView().getCurrentPageView().activateSection(t),r.getPanelView().getCurrentPageView().openActiveSection(),r.getPanelView().getCurrentPageView().render()),window.elementorCommon.elements.$body.removeClass("elementor-panel-loading"))},500)})}),window.$e.run("preview/reload")},u=(n,t)=>{window.elementorCommon.elements.$body.addClass("elementor-panel-loading"),window.$e.run("document/save/update").then(()=>{f(n,t)})},w=(n,t)=>{if(d){let e=new window.CustomEvent(n,{detail:t});d.dispatchEvent(e)}},y=n=>(r=n,n.once("preview:loaded",()=>{g(),C(),x()}),{updatePreview:f,reloadPreview:u,emitEvent:w}),m={init:y};var l=class extends window.elementorModules.frontend.handlers.Base{constructor(t){super(t),this.handlers={update:()=>{window.app.loaded.finally(()=>{window.app.refresher.run()})}}}onInit(){this.addLightboxComponent(),this.loadComponent().then(t=>{let e=t&&t[0];e&&typeof e.destroy=="function"&&(document.body.contains(e.element)?(Object.assign(this,{onDestroy:this.destroy.bind(this,e)}),window.elementor.hooks.addAction("editor/widgets/loop-grid/on-init",this.destroy.bind(this,e))):this.destroy(e)),this.handlers.update()}).catch(t=>{console.error("Failed to load component"),console.error(t)})}loadComponent(){let t=this.$element.get(0),e=this.hasWidgetLightbox()?t.parentElement:t;return window.app.componentsManager.init({scope:e,loadOnlyFirst:!0})}addLightboxComponent(){this.hasWidgetLightbox()?this.$element.attr("data-arts-component-name","PSWP"):this.$element.attr("data-arts-component-name")==="PSWP"&&this.$element.removeAttr("data-arts-component-name")}hasWidgetLightbox(){let t=this.$element.get(0);return this.getElementSettings("links_mode")==="lightbox"&&!t.querySelector('[data-arts-component-name="PSWP"]')}destroy(t){t&&t.element&&(window.app.componentsManager.destroyComponent({element:t.element}),this.handlers.update())}},$=()=>(window.ArtsWidgetComponentHandler=l,{ArtsWidgetComponentHandler:l}),h={init:$};var a=(n,t)=>{if(typeof n=="string")return t[n];let e={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string")e[i]=t[o];else if(typeof o=="object")if(o.value){let s=t[o.value];o.return_size===!1?s&&typeof s=="object"&&s.size!==void 0&&s.unit?e[i]=`${s.size}${s.unit}`:e[i]=s:s&&typeof s=="object"&&s.size!==void 0?e[i]=s.size:e[i]=s}else e[i]=a(o,t)}),e},E=(n,t)=>{let e={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string")n[o]!==void 0&&(e[i]=n[o]);else if(typeof o=="object"){if(o.condition&&!n[o.condition]){e[i]=!1;return}if(typeof o.value=="string"){let s=n[o.value];o.return_size===!0&&s&&typeof s=="object"&&s.size!==void 0?e[i]=s.size:e[i]=s}else typeof o.value=="object"&&(e[i]=a(o.value,n))}}),e},P=(n={},t=[])=>{let e=[];function i(o){typeof o=="string"?e.push(o):typeof o=="object"&&o!==null&&(o.condition&&e.push(o.condition),o.value?typeof o.value=="string"?e.push(o.value):typeof o.value=="object"&&i(o.value):Object.values(o).forEach(s=>i(s)))}return Object.values(n).forEach(o=>i(o)),[...new Set([...e,...t])]},p={convertSettings:E,processComplexValue:a,getLiveSettings:P};var v={LiveSettings:m,PreviewComponentsWidgets:h,Utilities:p};var F=v;export{v as Editor,F as default};
