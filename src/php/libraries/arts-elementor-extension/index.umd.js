/*!
 * Arts Elementor Extension v1.0.0
 * https://artemsemkin.com
 * https://github.com/artkrsk/arts-elementor-extension
 * © 2025 Artem Semkin
 * License: MIT
 */
(function(root, factory) {if (typeof define === 'function' && define.amd) {define(["jquery","elementor","backbone"], factory);} else if (typeof module === 'object' && module.exports) {module.exports = factory(require('jquery'), require('elementor'), require('backbone'));} else {root.ArtsElementorExtension = factory(root.jQuery, root.elementor, root.Backbone);}}(typeof self !== 'undefined' ? self : this, function(jQuery, elementor, Backbone) {
/*!
 * Arts Elementor Extension v1.0.0
 * https://artemsemkin.com
 * https://github.com/artkrsk/arts-elementor-extension
 * © 2025 Artem Semkin
 * License: MIT
 */
var ArtsElementorExtension=(()=>{var a=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var y=(n,e)=>{for(var t in e)a(n,t,{get:e[t],enumerable:!0})},$=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of b(e))!x.call(n,o)&&o!==t&&a(n,o,{get:()=>e[o],enumerable:!(i=C(e,o))||i.enumerable});return n};var E=n=>$(a({},"__esModule",{value:!0}),n);var F={};y(F,{Editor:()=>f,default:()=>A});var r=null,d=null,P=()=>{d=r.$preview.get(0).contentWindow},S=()=>{let{addChangeCallback:n}=r.settings.page;(window.artsElementorExtensionEditorLiveSettings||[]).forEach(t=>n(t,i=>L(t,i)))},L=(n,e)=>{let t=r.settings.page.model.attributes;h("arts/elementor_extension/editor/setting_changed",{settings:t,setting:n,value:e})},W=()=>{d&&(d.removeEventListener("arts/elementor_extension/editor/reload_preview",u),d.addEventListener("arts/elementor_extension/editor/reload_preview",u))},u=n=>{let e=n.detail||{},{route:t,section:i}=e;m(t,i)},w=(n,e)=>{r.once("preview:loaded",()=>{window.$e.data.get("globals/index").then(()=>{setTimeout(()=>{window.$e.routes.current.panel.search("panel/global")>=0?window.$e.run("panel/global/open").then(()=>{n&&window.$e.route(n),window.elementorCommon.elements.$body.removeClass("elementor-panel-loading")}):(n&&window.$e.route(n),e&&(r.getPanelView().getCurrentPageView().activateSection(e),r.getPanelView().getCurrentPageView().openActiveSection(),r.getPanelView().getCurrentPageView().render()),window.elementorCommon.elements.$body.removeClass("elementor-panel-loading"))},500)})}),window.$e.run("preview/reload")},m=(n,e)=>{window.elementorCommon.elements.$body.addClass("elementor-panel-loading"),window.$e.run("document/save/update").then(()=>{w(n,e)})},h=(n,e)=>{if(d){let t=new window.CustomEvent(n,{detail:e});d.dispatchEvent(t)}},_=n=>(r=n,n.once("preview:loaded",()=>{P(),S(),W()}),{updatePreview:w,reloadPreview:m,emitEvent:h}),p={init:_};var l=class extends window.elementorModules.frontend.handlers.Base{constructor(e){super(e),this.handlers={update:()=>{window.app.loaded.finally(()=>{window.app.refresher.run()})}}}onInit(){this.addLightboxComponent(),this.loadComponent().then(e=>{let t=e&&e[0];t&&typeof t.destroy=="function"&&(document.body.contains(t.element)?(Object.assign(this,{onDestroy:this.destroy.bind(this,t)}),window.elementor.hooks.addAction("editor/widgets/loop-grid/on-init",this.destroy.bind(this,t))):this.destroy(t)),this.handlers.update()}).catch(e=>{console.error("Failed to load component"),console.error(e)})}loadComponent(){let e=this.$element.get(0),t=this.hasWidgetLightbox()?e.parentElement:e;return window.app.componentsManager.init({scope:t,loadOnlyFirst:!0})}addLightboxComponent(){this.hasWidgetLightbox()?this.$element.attr("data-arts-component-name","PSWP"):this.$element.attr("data-arts-component-name")==="PSWP"&&this.$element.removeAttr("data-arts-component-name")}hasWidgetLightbox(){let e=this.$element.get(0);return this.getElementSettings("links_mode")==="lightbox"&&!e.querySelector('[data-arts-component-name="PSWP"]')}destroy(e){e&&e.element&&(window.app.componentsManager.destroyComponent({element:e.element}),this.handlers.update())}},z=()=>(window.ArtsWidgetComponentHandler=l,{ArtsWidgetComponentHandler:l}),v={init:z};var c=(n,e)=>{if(typeof n=="string")return e[n];let t={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string")t[i]=e[o];else if(typeof o=="object")if(o.value){let s=e[o.value];o.return_size===!1?s&&typeof s=="object"&&s.size!==void 0&&s.unit?t[i]=`${s.size}${s.unit}`:t[i]=s:s&&typeof s=="object"&&s.size!==void 0?t[i]=s.size:t[i]=s}else t[i]=c(o,e)}),t},O=(n,e)=>{let t={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string")n[o]!==void 0&&(t[i]=n[o]);else if(typeof o=="object"){if(o.condition&&!n[o.condition]){t[i]=!1;return}if(typeof o.value=="string"){let s=n[o.value];o.return_size===!0&&s&&typeof s=="object"&&s.size!==void 0?t[i]=s.size:t[i]=s}else typeof o.value=="object"&&(t[i]=c(o.value,n))}}),t},V=(n={},e=[])=>{let t=[];function i(o){typeof o=="string"?t.push(o):typeof o=="object"&&o!==null&&(o.condition&&t.push(o.condition),o.value?typeof o.value=="string"?t.push(o.value):typeof o.value=="object"&&i(o.value):Object.values(o).forEach(s=>i(s)))}return Object.values(n).forEach(o=>i(o)),[...new Set([...t,...e])]},g={convertSettings:O,processComplexValue:c,getLiveSettings:V};var f={LiveSettings:p,PreviewComponentsWidgets:v,Utilities:g};var A=f;return E(F);})();

return ArtsElementorExtension;}));